!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self)["pageworld-freezoom"]={})}(this,(function(t){"use strict";var o,e,r;t.Corner=void 0,(o=t.Corner||(t.Corner={}))[o.topLeft=1]="topLeft",o[o.topRight=2]="topRight",o[o.bottomRight=-1]="bottomRight",o[o.bottomLeft=-2]="bottomLeft",t.Edge=void 0,(e=t.Edge||(t.Edge={})).top="top",e.right="right",e.bottom="bottom",e.left="left",t.Quadrant=void 0,(r=t.Quadrant||(t.Quadrant={}))[r.OR=0]="OR",r[r.QD1=1]="QD1",r[r.QD2=2]="QD2",r[r.QD3=3]="QD3",r[r.QD4=4]="QD4";const n={[t.Edge.top]:[t.Corner.topRight,t.Corner.bottomRight,t.Corner.topLeft],[t.Edge.right]:[t.Corner.bottomRight,t.Corner.bottomLeft,t.Corner.topRight],[t.Edge.bottom]:[t.Corner.bottomLeft,t.Corner.topLeft,t.Corner.bottomRight],[t.Edge.left]:[t.Corner.topLeft,t.Corner.topRight,t.Corner.bottomLeft]};function i(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}function h(o,e){return{[t.Corner.topLeft]:()=>({x:o.left,y:o.top}),[t.Corner.topRight]:()=>({x:o.left+o.width,y:o.top}),[t.Corner.bottomRight]:()=>({x:o.left+o.width,y:o.top+o.height}),[t.Corner.bottomLeft]:()=>({x:o.left,y:o.top+o.height})}[e]()}function f(t,o){return g(h(o,t),i(o),o.ro)}function g(t,o,e){return{x:t.x*p(e)-t.y*s(e)-o.x*p(e)+o.y*s(e)+o.x,y:t.x*s(e)+t.y*p(e)-o.x*s(e)-o.y*p(e)+o.y}}function y(t,o,e){return{x:t.x*p(e)+t.y*s(e)-o.x*p(e)-o.y*s(e)+o.x,y:-t.x*s(e)+t.y*p(e)+o.x*s(e)-o.y*p(e)+o.y}}function x(o,e,r,n){let i={left:0,top:0};const h={width:2*Math.abs(e.x-o.x),height:2*Math.abs(e.y-o.y),ro:r};return n===t.Corner.topLeft&&(i={left:o.x,top:o.y}),n===t.Corner.topRight&&(i={left:o.x-h.width,top:o.y}),n===t.Corner.bottomLeft&&(i={left:o.x,top:o.y-h.height}),n===t.Corner.bottomRight&&(i={left:o.x-h.width,top:o.y-h.height}),Object.assign(Object.assign({},i),h)}function c(t,o){return{x:t.x+(o.x-t.x)/2,y:t.y+(o.y-t.y)/2}}function u(t){return t/360*2*Math.PI}function a(t){return 360*t/(2*Math.PI)}function p(t){return Math.cos(u(t))}function s(t){return Math.sin(u(t))}function d(t){return Math.pow(t,2)}function l(t,o){return{x:o.x-t.x,y:o.y-t.y}}function C(t,o){return(t.x*o.x+t.y*o.y)/Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))}function b(t,o){const e=Math.sqrt(d(o)/(d(t.x)+d(t.y)));return o>=0?{x:e*t.x,y:e*t.y}:{x:-e*t.x,y:-e*t.y}}function m(t,o){return{x:t.x+o.x,y:t.y+o.y}}function R(t){return Math.sqrt(d(t.x)+d(t.y))}function M(t,o){return{x:t.x-o.x,y:t.y-o.y}}function w(t,o){return e=(t.x*o.x+t.y*o.y)/(R(t)*R(o)),a(Math.acos(e));var e}function L(t,o,e){const r=c(f(-t,e),o);return x(y(o,r,e.ro),r,e.ro,t)}function O(o,e,r){const n=r.width/r.height,i=f(-o,r);let h=c(i,e),u=y(e,h,r.ro);const a=x(u,h,r.ro,o);if(a.width/a.height>n){const e=a.width-a.height*n;[t.Corner.topRight,t.Corner.bottomRight].indexOf(o)>-1?u.x-=e:u.x+=e}else{const e=a.height-a.width/n;[t.Corner.topLeft,t.Corner.topRight].indexOf(o)>-1?u.y+=e:u.y-=e}return u=g(u,h,r.ro),function(t,o,e,r){const n=c(o,t);return x(y(t,n,r),n,r,e)}(u,i,o,r.ro)}t.ScrapEdgeMap=n,t.cos=p,t.getAngleByRadian=a,t.getCenterDot=c,t.getCornerByRect=h,t.getNorm=R,t.getOriginByRect=i,t.getRadianByAngle=u,t.getRectByAcrossCorner=function(o,e,r,n){let i={left:0,top:0};const h={width:Math.abs(e.x-o.x),height:Math.abs(e.y-o.y),ro:r};return n===t.Corner.topLeft&&(i={left:o.x,top:o.y}),n===t.Corner.topRight&&(i={left:e.x-h.width,top:e.y}),n===t.Corner.bottomLeft&&(i={left:e.x,top:e.y-h.height}),n===t.Corner.bottomRight&&(i={left:e.x-h.width,top:e.y-h.height}),Object.assign(Object.assign({},i),h)},t.getRectByOrigin=x,t.getRotatedCorner=f,t.getShadow=C,t.getVectorAngle=w,t.getVectorByModal=b,t.inversionRotateMatrix=y,t.plusVector=m,t.rotateFree=function(t,o){const e=M(t,i(o));let r=w({x:0,y:-1},e);return r=e.x>0?r:360-r,Object.assign(Object.assign({},o),{ro:r})},t.rotateMatrix=g,t.sin=s,t.subVector=M,t.vectorInDot1=l,t.zoomCorner=function(t,o,e,r){return(t?O:L)(o,e,r)},t.zoomEdgeFree=function(o,e,r){const i=f(n[o][1],r),h=f(n[o][0],r),g=l(i,e),u=l(i,h),a=C(g,u);let p,s,d;p=b(u,a>0?a:1),d=o===t.Edge.top||o===t.Edge.bottom?r.width:r.height,s=b({x:u.y,y:-u.x},d);const R=m(s,p),M={x:R.x+i.x,y:R.y+i.y},w=c(i,M);return x(y(M,w,r.ro),w,r.ro,n[o][2])},t.zoomFreeCornerFree=L,t.zoomLockCornerFree=O,Object.defineProperty(t,"__esModule",{value:!0})}));
